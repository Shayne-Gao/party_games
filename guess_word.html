<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>çŒœè¯è¾¾äºº - æç®€é…ç½®ç‰ˆ</title>
    <style>
        :root {
            --primary: #6366f1;
            --success: #22c55e;
            --danger: #ef4444;
            --bg: #0f172a;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: -apple-system, system-ui, sans-serif;
            background: var(--bg); color: white; overflow: hidden;
            touch-action: manipulation;
        }

        .screen {
            display: none; width: 100%; height: 100%;
            flex-direction: column; align-items: center; justify-content: center;
            position: absolute; top: 0; left: 0; padding: 20px; box-sizing: border-box;
        }

        .active { display: flex; }

        /* é…ç½®é¡µ */
        .config-card {
            background: rgba(255,255,255,0.05); padding: 25px; border-radius: 24px;
            width: 90%; max-width: 400px; border: 1px solid rgba(255,255,255,0.1);
        }

        h1 { font-size: 2rem; margin: 0 0 10px 0; text-align: center; }
        label { display: block; margin-bottom: 8px; color: #94a3b8; font-size: 0.9rem; }

        select {
            width: 100%; padding: 15px; margin-bottom: 20px;
            border-radius: 12px; border: 2px solid #334155;
            background: #1e293b; color: white; font-size: 1.1rem; outline: none;
        }

        .btn {
            width: 100%; padding: 18px; border-radius: 15px; border: none;
            background: var(--primary); color: white; font-size: 1.2rem; font-weight: bold;
            cursor: pointer; transition: transform 0.1s;
        }

        .btn:active { transform: scale(0.95); }

        /* æ¸¸æˆé¡µ */
        #game-screen { background: #000; }
        #word-display { font-size: 18vw; font-weight: 900; text-align: center; z-index: 10; pointer-events: none; }
        
        #timer-bar {
            position: absolute; top: 0; left: 0; height: 10px;
            background: var(--primary); width: 100%; transition: width 0.3s;
        }

        .tap-zone {
            position: absolute; top: 0; height: 100%; width: 50%;
            display: flex; align-items: flex-end; justify-content: center;
            padding-bottom: 5vh; font-size: 1.1rem; font-weight: bold; z-index: 5;
        }
        #left-zone { left: 0; color: var(--success); background: linear-gradient(to top, rgba(34,197,94,0.1), transparent); }
        #right-zone { right: 0; color: var(--danger); background: linear-gradient(to top, rgba(239,68,68,0.1), transparent); }

        /* ç»“ç®—é¡µ */
        .score-num { font-size: 8rem; font-weight: 800; color: var(--primary); margin: 10px 0; }
        
        /* åŠ¨ç”»åé¦ˆ */
        .flash-success { animation: flashG 0.4s; }
        .flash-danger { animation: flashR 0.4s; }
        @keyframes flashG { from { background: rgba(34,197,94,0.5); } to { background: #000; } }
        @keyframes flashR { from { background: rgba(239,68,68,0.5); } to { background: #000; } }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen active">
        <h1>çŒœè¯è¾¾äºº</h1>
        <div class="config-card">
            <label>ğŸ¬ é€‰æ‹©é¢˜åº“</label>
            <select id="category-select"></select>
            
            <label>â±ï¸ æ¸¸æˆæ—¶é•¿</label>
            <select id="time-select">
                <option value="60">60 ç§’</option>
                <option value="90" selected>90 ç§’</option>
                <option value="120">120 ç§’</option>
            </select>
            
            <button class="btn" onclick="startGame()">å‡†å¤‡å¥½äº†ï¼</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="timer-bar"></div>
        <div id="left-zone" class="tap-zone" onclick="handleResult(true)">æ­£ç¡® âœ”</div>
        <div id="right-zone" class="tap-zone" onclick="handleResult(false)">è·³è¿‡ âœ˜</div>
        <div id="word-display">3</div>
    </div>

    <div id="result-screen" class="screen">
        <h2>å¾—åˆ†</h2>
        <div class="score-num" id="final-score">0</div>
        <p id="stats-detail" style="color:#94a3b8; margin-bottom:30px;"></p>
        <button class="btn" style="max-width:200px" onclick="location.reload()">å›ä¸»é¡µ</button>
    </div>

    <script id="vocabulary-data" type="text/plain">
    
        ğŸ¬ ç»å…¸å½±è§†: æˆ˜ç‹¼ æµæµªåœ°çƒ éœ¸ç‹åˆ«å§¬ è¥¿æ¸¸è®° çº¢æ¥¼æ¢¦ ç”„å¬›ä¼  å¤§è¯è¥¿æ¸¸ å“ªå’ ç–¯ç‹‚çš„çŸ³å¤´ æ³°å¦å°¼å…‹å· é˜¿å‡¡è¾¾ å“ˆåˆ©æ³¢ç‰¹ å¤ä»‡è€…è”ç›Ÿ å˜å½¢é‡‘åˆš èœ˜è››ä¾  è™è ä¾  è¶…äºº ç‹®å­ç‹ å¯»æ¢¦ç¯æ¸¸è®° åƒä¸åƒå¯» æ­¦æ—å¤–ä¼  äº®å‰‘ å®¶æœ‰å„¿å¥³ è¿˜ç æ ¼æ ¼ æ½œä¼ ç…çŠæ¦œ åº†ä½™å¹´ éšç§˜çš„è§’è½ ç‹‚é£™ ç¹èŠ± æ¼«é•¿çš„å­£èŠ‚ æ•™çˆ¶ ç›—æ¢¦ç©ºé—´ æ˜Ÿé™…ç©¿è¶Š é»‘å®¢å¸å›½ è‚–ç”³å…‹çš„æ•‘èµ é˜¿ç”˜æ­£ä¼  å°‘å¹´æ´¾ åŠŸå¤« å°‘æ—è¶³çƒ å–œå‰§ä¹‹ç‹ å§è™è—é¾™ è‹±é›„ æ— é—´é“ é‡åº†æ£®æ— èŠ±æ ·å¹´å å€©å¥³å¹½é­‚ ç™½è›‡ä¼  å°ç¥æ¦œ ä¸Šæµ·æ»©

        ğŸ¦ åŠ¨ç‰©ä¸–ç•Œ: å¤§ç†ŠçŒ« é‡‘ä¸çŒ´ ä¸œåŒ—è™ æ‰¬å­é³„ è—ç¾šç¾Š é•¿é¢ˆé¹¿ æ–‘é©¬ è¢‹é¼  ä¼é¹… æ²³é©¬ çŠ€ç‰› åŒ—æç†Š å˜è‰²é¾™ å•„æœ¨é¸Ÿ çŒ«å¤´é¹° èœ‚é¸Ÿ å¤§ç™½é²¨ æµ·è±š è“é²¸ ç« é±¼ æµ·é©¬ èƒèŸ¹ é¾™è™¾ è¤ç«è™« è³è‚ è´è¶ èœ»èœ“ èœˆèš£ èå­ åœŸæ‹¨é¼  ç¾Šé©¼ å“ˆå£«å¥‡ æ ‘æ‡’ è€ƒæ‹‰ æµ£ç†Š åˆºçŒ¬ æ¾é¼  è™è  éª†é©¼ é¸µé¸Ÿ ç«çƒˆé¸Ÿ å­”é›€ å¤©é¹… é¹¦é¹‰ ä¹Œé¸¦ å–œé¹Š ç§ƒé¹« æ°´è±š èœœç¾ é¸­å˜´å…½

        ğŸ“– æˆè¯­åå¥: ç‹å‡è™å¨ ç”»è›‡æ·»è¶³ æ©è€³ç›—é“ƒ æ‹”è‹—åŠ©é•¿ äº¡ç¾Šè¡¥ç‰¢ å®ˆæ ªå¾…å…” é¡ºæ‰‹ç‰µç¾Š æŒ‡é¹¿ä¸ºé©¬ é—»é¸¡èµ·èˆ å‡¿å£å·å…‰ æ‚¬æ¢åˆºè‚¡ å§è–ªå°èƒ† ç ´é‡œæ²‰èˆŸ èƒŒæ°´ä¸€æˆ˜ å››é¢æ¥šæ­Œ è‰èˆ¹å€Ÿç®­ ä¸‰é¡¾èŒ…åº æœ›æ¢…æ­¢æ¸´ ç”»é¥¼å……é¥¥ å£èœœè…¹å‰‘ ç¬‘é‡Œè—åˆ€ ç²¾å¿ æŠ¥å›½ å¤§ä¹‰ç­äº² é“å…¬é¸¡ è½æ±¤é¸¡ é©¬åç‚® æ³¼å†·æ°´ ç‚’é±¿é±¼ èƒŒé”…ä¾  çº¸ä¸Šè°ˆå…µ å¯¹ç‰›å¼¹ç´ ç›²äººæ‘¸è±¡ åˆ»èˆŸæ±‚å‰‘ æƒŠå¼“ä¹‹é¸Ÿ å¦‚é±¼å¾—æ°´ å‘†è‹¥æœ¨é¸¡ å¦‚è™æ·»ç¿¼ èƒ†å°å¦‚é¼  å¯¹é…’å½“æ­Œ å¿ƒæœ‰çµçŠ€ æœä¸‰æš®å›› å¡ç¿å¤±é©¬ åŠé€”è€ŒåºŸ ä¸€é¸£æƒŠäºº ä¸€çŸ³äºŒé¸Ÿ ä¸€è§é’Ÿæƒ… èµ°é©¬è§‚èŠ± é’æ¢…ç«¹é©¬ åå‰¯å…¶å®

        ğŸ”¥ ç½‘ç»œçƒ­æ¢—: é¥é¥é¢†å…ˆ ä½ å¤ªç¾ é¸¡å“¥ äººç±»é«˜è´¨é‡ç”·æ€§ æ “Q èŠ­æ¯”Qäº† ä½ ä¸ªè€å…­ æƒ³ä½ çš„é£ å°é»‘å­ å°Šå˜Ÿå‡å˜Ÿ æé¾™æ‰›ç‹¼ å“ˆåŸºç±³ ç‰¹ç§å…µæ—…æ¸¸ å‘½è¿çš„é½¿è½® æ˜¾çœ¼åŒ… ç¡¬æ ¸ ç ´é˜² èººå¹³ å†…å· æŸ æª¬ç²¾ é›¨å¥³æ— ç“œ å¥¥åˆ©ç»™ æ·¡é»„çš„é•¿è£™ è¿™è°é¡¶å¾—ä½ çœŸé¦™ æ‰å¿ƒäº† å…ƒå®‡å®™ æ•°å­—åŒ– æ–œæ é’å¹´ ç¤¾æ ç¤¾ç‰› å‡¡å°”èµ› å‡¡å°”èµ›æ–‡å­¦ emo YYDS ç»ç»å­ å¤ºç¬‹ çˆ·é’å› å¹²é¥­äºº æ‰“å·¥äºº åŒå‡ ç¢³ä¸­å’Œ è“ç˜¦é¦™è‡ çš®çš®è™¾æˆ‘ä»¬èµ° æ´ªè’ä¹‹åŠ› è‘›ä¼˜èºº å‹è°Šçš„å°èˆ¹ é’ˆä¸æˆ³

        ğŸ—ºï¸ åœ°ç†å¸¸è¯†: åŒ—äº¬ ä¸Šæµ· å¹¿å· æ·±åœ³ é•¿åŸ æ•…å®« ä¸œæ–¹æ˜ç  è¥¿æ¹– å…µé©¬ä¿‘ é»„å±± æ³°å±± å–œé©¬æ‹‰é›…å±± ç ç©†æœ—ç›å³° é•¿æ±Ÿ é»„æ²³ å¤ªå¹³æ´‹ å¤§è¥¿æ´‹ å°åº¦æ´‹ å—æ åŒ—æ æ’’å“ˆæ‹‰æ²™æ¼  äºšé©¬é€Šé›¨æ— åŸƒè²å°”é“å¡” é‡‘å­—å¡” è‡ªç”±å¥³ç¥åƒ æ‚‰å°¼æ­Œå‰§é™¢ å¤§æœ¬é’Ÿ å¯Œå£«å±± é•¿ç™½å±± é’æµ·æ¹– æ´åº­æ¹– é„±é˜³æ¹– å¼ å®¶ç•Œ ä¹å¯¨æ²Ÿ æ¡‚æ—å±±æ°´ å¤©æ¶¯æµ·è§’ å¸ƒè¾¾æ‹‰å®« è«é«˜çªŸ ä¹å±±å¤§ä½› åå±± åµ©å±± æ’å±± è¡¡å±± æ˜†ä»‘å±± å³¨çœ‰å±± äº”å°å±± æ™®é™€å±± å°æ¹¾å²› æµ·å—å²› é¼“æµªå±¿

        ğŸ  ç”Ÿæ´»ç”¨å“: ç‰™åˆ· æ¯›å·¾ æ¢³å­ é•œå­ æ´—é¢å¥¶ æ´—å‘æ°´ æ²æµ´éœ² ç‰™è† ç”µå¹é£ æŒ‡ç”²åˆ€ å‰ƒé¡»åˆ€ é©¬æ¡¶åˆ· æ‹–æŠŠ æ‰«å¸š åƒåœ¾æ¡¶ è¡£æ¶ æ´—è¡£æœº ç”µå†°ç®± å¾®æ³¢ç‚‰ ç”µé¥­ç…² æ´—ç¢—æœº ç”µé£æ‰‡ ç©ºè°ƒ å¸å°˜å™¨ ç©ºæ°”å‡€åŒ–å™¨ çƒ­æ°´å£¶ å……ç”µå® è·¯ç”±å™¨ ç¬”è®°æœ¬ç”µè„‘ å¹³æ¿ç”µè„‘ æ™ºèƒ½æ‰‹è¡¨ è€³æœº éŸ³ç®± æŠ•å½±ä»ª æ‰‹ç”µç­’ é›¨ä¼ é’¥åŒ™æ‰£ ä¿æ¸©æ¯ å¼€ç“¶å™¨ æŒ‡ç”²æ²¹ å£ç½© æ¶ˆæ¯’æ¶² æ´—æ‰‹æ¶² çº¸å·¾ æ¹¿çº¸å·¾ æ£‰ç­¾ åˆ›å¯è´´ ä½“æ¸©è®¡ æŒ‡å—é’ˆ è®¡ç®—å™¨

        ğŸ¬ ç«¥å¹´å›å¿†: å¼¹ç  æ¯½å­ è¾£æ¡ æ‚ æ‚ çƒ é™€èº ä¿„ç½—æ–¯æ–¹å— é­‚æ–—ç½— è¶…çº§ç›ä¸½ å¤§å¤´è´´ ç£å¸¦ éšèº«å¬ æ³¡æ³¡ç³– ä¸œå—è¥¿åŒ— èº²çŒ«çŒ« è€é¹°æ‰å°é¸¡ ç¿»èŠ±ç»³ å°éœ¸ç‹ è¡—æœº èˆ’å…‹è´å¡” é»‘çŒ«è­¦é•¿ è‘«èŠ¦å¨ƒ çŒç¯®é«˜æ‰‹ ä¸ƒé¾™ç  åä¾¦æ¢æŸ¯å— æœºå™¨çŒ« å“†å•¦Aæ¢¦ åœ£æ–—å£« æ•°ç å®è´ å® ç‰©å°ç²¾çµ é“è‡‚é˜¿ç«¥æœ¨ èœ¡ç¬”å°æ–° æ¨±æ¡ƒå°ä¸¸å­ å–œç¾Šç¾Š è™¹çŒ«è“å…” å¥‡å˜å¶ä¸å˜ é˜³å…‰ä½“è‚² å¹¿æ’­ä½“æ“ çœ¼ä¿å¥æ“ çº¢é¢†å·¾ ä¸‰å¥½å­¦ç”Ÿ

        ğŸ• ç¾é£Ÿå¤§èµ: ç«é”… èºè›³ç²‰ æ±‰å ¡åŒ… å°ç¬¼åŒ… çç å¥¶èŒ¶ æ¦´è² åŒ—äº¬çƒ¤é¸­ é©¬å¡é¾™ è‡­è±†è… å†°ç³–è‘«èŠ¦ å®«ä¿é¸¡ä¸ é±¼é¦™è‚‰ä¸ éº»å©†è±†è… çº¢çƒ§è‚‰ é…¸èœé±¼ ç³–é†‹é‡Œè„Š åœ°ä¸‰é²œ å°é¾™è™¾ ç¾Šè‚‰ä¸² ä¸²ä¸²é¦™ ç…é¥¼æœå­ é¸¡è›‹çŒé¥¼ è‚ ç²‰ çƒ­å¹²é¢ åˆ€å‰Šé¢ å…°å·æ‹‰é¢ ç‚¸é…±é¢ èºè›³ç²‰ é…¸è¾£ç²‰ è¿‡æ¡¥ç±³çº¿ æŠ«è¨ å¯¿å¸ åˆºèº« ç‰›æ’ æ„é¢ å’–å–±é¥­ ææ‹‰ç±³è‹ èŠå£«è›‹ç³• ç”œç”œåœˆ è›‹æŒ ç‰›è§’é¢åŒ… å†°æ·‡æ·‹ å·§å…‹åŠ› çˆ†ç±³èŠ± è–¯æ¡
    </script>

    <script>
        let gameData = {};
        let currentPool = [];
        let score = 0, skip = 0, timeLeft = 0, totalTime = 0, timer = null;

        // è§£æçº¯æ–‡æœ¬é…ç½®
        function parseVocabulary() {
            const raw = document.getElementById('vocabulary-data').innerText;
            const lines = raw.split('\n');
            lines.forEach(line => {
                if (line.includes(':')) {
                    const parts = line.split(':');
                    const category = parts[0].trim();
                    const words = parts[1].trim().split(/\s+/); // ç”¨ç©ºæ ¼ã€æ¢è¡Œã€åˆ¶è¡¨ç¬¦åˆ†éš”
                    if (category && words.length > 0) {
                        gameData[category] = words;
                    }
                }
            });
            
            const select = document.getElementById('category-select');
            for (let cat in gameData) {
                let opt = document.createElement('option');
                opt.value = cat; opt.innerText = cat;
                select.appendChild(opt);
            }
        }

        function startGame() {
            const cat = document.getElementById('category-select').value;
            totalTime = parseInt(document.getElementById('time-select').value);
            timeLeft = totalTime;
            currentPool = [...gameData[cat]].sort(() => Math.random() - 0.5);
            score = 0; skip = 0;

            switchScreen('game-screen');
            
            // 3ç§’å‡†å¤‡å€’è®¡æ—¶
            let count = 3;
            document.getElementById('word-display').innerText = count;
            let cd = setInterval(() => {
                count--;
                if(count > 0) {
                    document.getElementById('word-display').innerText = count;
                } else {
                    clearInterval(cd);
                    nextWord();
                    startTimer();
                }
            }, 800);

            try { if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen(); } catch(e){}
        }

        function nextWord() {
            if (currentPool.length === 0) return endGame();
            document.getElementById('word-display').innerText = currentPool.pop();
        }

        function handleResult(isOk) {
            if (timeLeft <= 0) return;
            isOk ? score++ : skip++;
            triggerFlash(isOk ? 'flash-success' : 'flash-danger');
            if (navigator.vibrate) navigator.vibrate(50);
            nextWord();
        }

        function triggerFlash(cls) {
            const s = document.getElementById('game-screen');
            s.classList.remove('flash-success', 'flash-danger');
            void s.offsetWidth; 
            s.classList.add(cls);
        }

        function startTimer() {
            const bar = document.getElementById('timer-bar');
            timer = setInterval(() => {
                timeLeft--;
                bar.style.width = (timeLeft / totalTime * 100) + "%";
                if (timeLeft <= 10) bar.style.background = "var(--danger)";
                if (timeLeft <= 0) endGame();
            }, 1000);
        }

        function endGame() {
            clearInterval(timer);
            document.getElementById('final-score').innerText = score;
            document.getElementById('stats-detail').innerText = `æ­£ç¡®: ${score} | è·³è¿‡: ${skip}`;
            switchScreen('result-screen');
            if (document.fullscreenElement) document.exitFullscreen();
        }

        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        window.onload = parseVocabulary;
    </script>
</body>
</html>